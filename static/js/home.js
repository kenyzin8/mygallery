var currentImageID=-1,canClickButtons=!0;function showImage(e){var n=document.getElementById("image-preview-modal");$(".image-content").html('<span class="loading loading-ring loading-lg"></span>'),$.ajax({url:previewImageUrl,type:"GET",data:{image_id:e},success:function(e){if(e.success){$(".image-title").text(e.image_title);var t=$('<img src="'+e.image_url+'" class="h-screen object-contain mx-auto">');t.on("load",function(){setTimeout(function(){$(".image-content").html(t)},500)}),n.showModal()}else console.log("Error: "+e.error)},error:function(e){console.log("AJAX error: ",e)}})}function getNextImageId(){var e=ids.indexOf(parseInt(currentImageID));if(-1!==e){var n=(e+1)%ids.length;return ids[n]}return null}function getPrevImageId(){var e=ids.indexOf(parseInt(currentImageID));if(-1!==e){var n=(e-1+ids.length)%ids.length;return ids[n]}return null}function navigateImage(e){if(canClickButtons){var n="next"===e?getNextImageId():getPrevImageId();null!==n&&(currentImageID=n,showImage(n),disableButtonsTemporarily())}}function disableButtonsTemporarily(){canClickButtons=!1,$(".next-button, .prev-button").prop("disabled",!0),setTimeout(function(){canClickButtons=!0,$(".next-button, .prev-button").prop("disabled",!1)},1e3)}$(document).on("click",".image-preview",function(){showImage(currentImageID=$(this).data("image-id"))}),$(document).on("click",".next-button",function(){navigateImage("next")}),$(document).on("click",".prev-button",function(){navigateImage("prev")}),$(document).keydown(function(e){39===e.keyCode&&navigateImage("next"),37===e.keyCode&&navigateImage("prev")}),document.addEventListener("DOMContentLoaded",function(){let e=document.querySelectorAll("img"),n=document.getElementById("skeleton-wrap"),t=0;e.forEach(a=>{let i=()=>{++t===e.length&&setTimeout(function(){n.classList.add("hidden"),e.forEach(e=>e.classList.remove("hidden"))},500)};a.complete?i():(a.addEventListener("load",i),a.addEventListener("error",i))})});